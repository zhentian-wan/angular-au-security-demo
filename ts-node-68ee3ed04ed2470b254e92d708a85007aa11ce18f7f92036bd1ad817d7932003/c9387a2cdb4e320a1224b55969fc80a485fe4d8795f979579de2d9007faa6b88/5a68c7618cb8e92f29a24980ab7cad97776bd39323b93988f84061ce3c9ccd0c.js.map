{"version":3,"file":"/Users/zhentianwan/Documents/Programming/Angular2/angular-security-course/server/get-user.route.ts","sources":["/Users/zhentianwan/Documents/Programming/Angular2/angular-security-course/server/get-user.route.ts"],"names":[],"mappings":";;AACA,iDAA6C;AAE7C,iBAAwB,GAAY,EAAE,GAAa;IACjD,6BAA6B;IAC7B,IAAM,SAAS,GAAG,GAAG,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;IAC3C,gEAAgE;IAChE,IAAM,IAAI,GAAG,4BAAY,CAAC,mBAAmB,CAAC,SAAS,CAAC,CAAC;IACzD,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;QACT,6CAA6C;QAC7C,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC7B,CAAC;IAAC,IAAI,CAAC,CAAC;QACN,2CAA2C;QAC3C,GAAG,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;IACtB,CAAC;AACH,CAAC;AAZD,0BAYC","sourcesContent":["import {Request, Response} from 'express';\nimport {sessionStore} from './session-store';\n\nexport function getUser(req: Request, res: Response) {\n  // Get sessionid from cookies\n  const sessionId = req.cookies['SESSIONID'];\n  // get user according to the session id from the session storage\n  const user = sessionStore.findUserBySessionId(sessionId);\n  if (user) {\n    // if there is user, send successful response\n    res.status(200).json(user);\n  } else {\n    // if there is no user, send empty response\n    res.sendStatus(204);\n  }\n}\n"]}